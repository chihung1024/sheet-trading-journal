# ğŸ“‹ SaaS Trading Journal PRO

<div align="center">

![Version](https://img.shields.io/badge/version-2.52.0-blue.svg)
![Python](https://img.shields.io/badge/python-3.10+-green.svg)
![Vue](https://img.shields.io/badge/vue-3.4+-brightgreen.svg)
![License](https://img.shields.io/badge/license-MIT-orange.svg)
![Cloudflare](https://img.shields.io/badge/cloudflare-workers-f38020.svg)

**ç¾ä»£åŒ–çš„æŠ•è³‡çµ„åˆè¿½è¹¤èˆ‡äº¤æ˜“æ—¥èªŒç³»çµ±**

å°ˆç‚ºç¾è‚¡ / å°è‚¡ / éŸ“è‚¡æŠ•è³‡è€…è¨­è¨ˆï¼Œæ¡ç”¨å…¨ Serverless æ¶æ§‹  
é«˜æ•ˆèƒ½ | ä½æˆæœ¬ | å³æ™‚æ•¸æ“š | PWA æ”¯æ´ | ç­–ç•¥ç¾¤çµ„ | å¤šäººéš”é›¢ï¼ˆMulti-userï¼‰

[ğŸŒ Live Demo](https://sheet-trading-journal.pages.dev/) | [ğŸ“– éƒ¨ç½²æ–‡ä»¶](https://github.com/chihung1024/sheet-trading-journal/blob/main/DEPLOYMENT_FINAL.md) | [ğŸ› Issues](https://github.com/chihung1024/sheet-trading-journal/issues)

</div>

---

## ğŸ“‘ ç›®éŒ„

- [åŠŸèƒ½ç¸½è¦½](#-åŠŸèƒ½ç¸½è¦½)
- [ç³»çµ±æ¶æ§‹](#-ç³»çµ±æ¶æ§‹)
- [Repo çµæ§‹](#-repo-çµæ§‹)
- [è³‡æ–™èˆ‡äº¤æ˜“æ¨¡å‹](#-è³‡æ–™èˆ‡äº¤æ˜“æ¨¡å‹)
- [ç¸¾æ•ˆè¨ˆç®—èªªæ˜ï¼ˆä»¥ç¨‹å¼ç¢¼ç‚ºæº–ï¼‰](#-ç¸¾æ•ˆè¨ˆç®—èªªæ˜ä»¥ç¨‹å¼ç¢¼ç‚ºæº–)
- [éƒ¨ç½²èˆ‡é–‹ç™¼](#-éƒ¨ç½²èˆ‡é–‹ç™¼)
- [å®‰å…¨æ€§](#-å®‰å…¨æ€§)
- [é™åˆ¶èˆ‡å‡è¨­](#-é™åˆ¶èˆ‡å‡è¨­)

---

## âœ¨ åŠŸèƒ½ç¸½è¦½

### ğŸ  ç¸½è¦½é é¢

æŠ•è³‡çµ„åˆå„€è¡¨æ¿ï¼Œä¸€ç›®ç­ç„¶æŒæ¡å…¨å±€ï¼š

- **ç¸¾æ•ˆå¡ç‰‡ï¼ˆStats Gridï¼‰**
  - ç¸½è³‡ç”¢ï¼ˆMarket Value / NAV-likeï¼‰
  - å·²å¯¦ç¾æç›Šï¼ˆRealized P&Lï¼‰
  - æœªå¯¦ç¾æç›Šï¼ˆUnrealized P&Lï¼‰
  - ç¸½æç›Šï¼ˆTotal P&Lï¼‰
  - ROIï¼ˆæŠ•è³‡å ±é…¬ç‡ï¼‰
  - TWRï¼ˆæ™‚é–“åŠ æ¬Šå ±é…¬ç‡ï¼›æ—¥åˆ‡åˆ† linked returnsï¼‰
  - XIRRï¼ˆå€‹äººå¹´åŒ–å ±é…¬ç‡ / IRRï¼‰
  - å‹ç‡ / æŒå€‰æ•¸ / äº¤æ˜“ç­†æ•¸

- **ç¸¾æ•ˆæ›²ç·šåœ–ï¼ˆPerformance Chartï¼‰**
  - æŠ•è³‡çµ„åˆ vs. Benchmark æ­·å²è¡¨ç¾
  - è‡ªè¨‚ Benchmark tickerï¼ˆSPY / QQQ / 0050.TW / 005930.KS ç­‰ï¼‰
  - æ”¯æ´å¤šæ™‚é–“è»¸åˆ‡æ›ï¼ˆå…¨éƒ¨ / 1å¹´ / 6æœˆ / 3æœˆ / 1æœˆï¼‰
  - Total-return æ¨¡å¼ï¼ˆåƒ¹æ ¼ + é…æ¯ï¼Œå«é æ‰£ç¨…ç‡ï¼‰

### ğŸ“ˆ åœ–è¡¨é é¢

å°ˆæ³¨æ–¼ç¸¾æ•ˆæ›²ç·šçš„å®Œæ•´æª¢è¦–ï¼š
- æ”¾å¤§ç‰ˆç¸¾æ•ˆåœ–è¡¨
- æ”¯æ´å¤šç¾¤çµ„åˆ‡æ›
- åœ–è¡¨äº’å‹•ï¼ˆç¸®æ”¾ã€Tooltipã€æ•¸æ“šé»æ¨™è¨»ï¼‰

### ğŸ’¼ æŒå€‰æ˜ç´°é é¢

ç•¶å‰æŒå€‰çš„è©³ç´°è³‡è¨Šè¡¨æ ¼ï¼š
- æ¨™çš„ä»£ç¢¼ï¼ˆSymbolï¼‰
- æŒå€‰æ•¸é‡ï¼ˆQtyï¼‰
- å¹³å‡æˆæœ¬ï¼ˆAvg Costï¼‰
- ç•¶å‰å¸‚åƒ¹ï¼ˆCurrent Priceï¼‰
- å¸‚å€¼ï¼ˆMarket Valueï¼‰
- æœªå¯¦ç¾æç›Šï¼ˆUnrealized P&Lï¼‰
- æœªå¯¦ç¾å ±é…¬ç‡ï¼ˆUnrealized %ï¼‰
- æ¨™çš„æ¬Šé‡ï¼ˆWeight %ï¼‰
- æ”¯æ´ä¾å„æ¬„ä½æ’åº
- å³æ™‚å¸‚åƒ¹æ›´æ–°ï¼ˆå«ç›¤ä¸­ / æ”¶ç›¤åƒ¹æ¨™ç¤ºï¼‰

### ğŸ§¾ äº¤æ˜“ç´€éŒ„é é¢

å®Œæ•´çš„äº¤æ˜“æ­·å²ç®¡ç†ï¼š
- **äº¤æ˜“åˆ—è¡¨**
  - æ—¥æœŸã€æ¨™çš„ã€é¡å‹ï¼ˆBUY / SELL / DIVï¼‰
  - æ•¸é‡ã€åƒ¹æ ¼ã€æ‰‹çºŒè²»ã€ç¨…è²»
  - ç­–ç•¥æ¨™ç±¤ï¼ˆTagï¼‰
  - å¿«é€Ÿç·¨è¼¯ / åˆªé™¤åŠŸèƒ½

- **ç¯©é¸èˆ‡æœå°‹**
  - ä¾æ¨™çš„æœå°‹
  - ä¾äº¤æ˜“é¡å‹ç¯©é¸
  - ä¾ç¾¤çµ„æ¨™ç±¤ç¯©é¸
  - æ—¥æœŸå€é–“ç¯©é¸

### ğŸ’° é…æ¯ç´€éŒ„é é¢

è‚¡æ¯é…ç™¼èˆ‡ç¾é‡‘æµè¿½è¹¤ï¼š
- **é…æ¯æ­·å²è¡¨**
  - è‡ªå‹•åµæ¸¬æ‡‰è¨ˆè‚¡æ¯ï¼ˆPendingï¼‰
  - å·²ç¢ºèªé…æ¯ï¼ˆConfirmedï¼‰
  - é™¤æ¯æ—¥ï¼ˆEx-Dateï¼‰ã€ç™¼æ”¾æ—¥ï¼ˆPay Dateï¼‰
  - æ¯è‚¡é…æ¯ã€æŒæœ‰æ•¸é‡ã€é…æ¯ç¸½é¡
  - é æ‰£ç¨…ç‡èˆ‡æ·¨æ”¶å…¥

- **å¿«é€Ÿæ“ä½œ**
  - ä¸€éµæ–°å¢ DIV äº¤æ˜“ç¢ºèªé…æ¯
  - Pending è‚¡æ¯æé†’å¾½ç« 
  - é…æ¯é‡‘é¡è‡ªå‹•æ›ç®—ç‚ºå°å¹£

### ğŸ·ï¸ ç¾¤çµ„ç®¡ç†é é¢

ç­–ç•¥ç¾¤çµ„è¨­å®šèˆ‡ç¸¾æ•ˆéš”é›¢ï¼š
- **ç¾¤çµ„åˆ—è¡¨**
  - æª¢è¦–æ‰€æœ‰ç­–ç•¥ç¾¤çµ„ï¼ˆTagï¼‰
  - å„ç¾¤çµ„ç¨ç«‹ç¸¾æ•ˆæŒ‡æ¨™
  - ç¾¤çµ„æˆç«‹æ—¥æœŸèˆ‡ç´¯è¨ˆè¡¨ç¾

- **ç¾¤çµ„æ“ä½œ**
  - æ–°å¢ / é‡å‘½å / åˆªé™¤ç¾¤çµ„
  - äº¤æ˜“ç´€éŒ„è‡ªå‹•æ­¸å±¬ç¾¤çµ„
  - `all` ç¾¤çµ„è‡ªå‹•åŒ…å«æ‰€æœ‰äº¤æ˜“

### ğŸ“ äº¤æ˜“è¡¨å–®ï¼ˆSide Panelï¼‰

å›ºå®šå¼å³å´é¢æ¿ï¼Œéš¨æ™‚æ–°å¢/ç·¨è¼¯äº¤æ˜“ï¼š
- **äº¤æ˜“é¡å‹**
  - BUYï¼ˆè²·å…¥ï¼‰
  - SELLï¼ˆè³£å‡ºï¼‰
  - DIVï¼ˆé…æ¯ï¼‰

- **æ¬„ä½è¨­è¨ˆ**
  - æ¨™çš„ä»£ç¢¼ï¼ˆè‡ªå‹•è£œå…¨å»ºè­°ï¼‰
  - äº¤æ˜“æ—¥æœŸï¼ˆæ—¥æ›†é¸æ“‡å™¨ï¼‰
  - æ•¸é‡ / åƒ¹æ ¼
  - æ‰‹çºŒè²» / ç¨…è²»ï¼ˆè‡ªå‹•æ­£è¦åŒ–ç‚ºæ­£å€¼ï¼‰
  - ç­–ç•¥æ¨™ç±¤ï¼ˆæ”¯æ´ `,` æˆ– `;` åˆ†éš”å¤šæ¨™ç±¤ï¼‰

- **æ™ºèƒ½åŠŸèƒ½**
  - ç·¨è¼¯æ¨¡å¼è‡ªå‹•å¡«å……ç¾æœ‰è³‡æ–™
  - è¡¨å–®é©—è­‰èˆ‡éŒ¯èª¤æç¤º
  - é€å‡ºå¾Œè‡ªå‹•è§¸ç™¼å¾Œç«¯è¨ˆç®—

### ğŸ”„ è‡ªå‹•åˆ·æ–°æ©Ÿåˆ¶

èƒŒæ™¯è‡ªå‹•è§¸ç™¼æŠ•è³‡çµ„åˆè¨ˆç®—ï¼š
- é è¨­æ¯ 3 åˆ†é˜è‡ªå‹•è§¸ç™¼ GitHub Actions
- å€’æ•¸è¨ˆæ™‚å™¨é¡¯ç¤ºä¸‹æ¬¡æ›´æ–°æ™‚é–“
- ä¸€éµæš«åœ/æ¢å¾©è‡ªå‹•åˆ·æ–°
- æ‰‹å‹•è§¸ç™¼æŒ‰éˆ•ï¼ˆé©åˆå³æ™‚æ›´æ–°éœ€æ±‚ï¼‰
- ç‹€æ…‹è¼ªè©¢ï¼šè‡ªå‹•è¿½è¹¤å¾Œç«¯è¨ˆç®—é€²åº¦

### ğŸŒ“ æ·±è‰²æ¨¡å¼ & PWA

- **ä¸»é¡Œåˆ‡æ›**
  - æ·±è‰² / æ·ºè‰²æ¨¡å¼
  - ä¸€éµåˆ‡æ›ï¼Œè¨˜æ†¶åå¥½è¨­å®š

- **PWA åŠŸèƒ½**
  - å¯å®‰è£è‡³æ¡Œé¢/ä¸»ç•«é¢
  - é›¢ç·šå¿«å–
  - Service Worker è‡ªå‹•æ›´æ–°æç¤º

### ğŸ” ä½¿ç”¨è€…èªè­‰

- Google OAuth 2.0 ç™»å…¥
- JWT Token é©—è­‰
- å¤šä½¿ç”¨è€…è³‡æ–™éš”é›¢
- å®‰å…¨ç™»å‡ºæ©Ÿåˆ¶

---

## ğŸ­ ç³»çµ±æ¶æ§‹

### é«˜å±¤æ¶æ§‹

- **å‰ç«¯ï¼ˆSPAï¼‰**
  - Vue 3 / Vite
  - Cloudflare Pages éƒ¨ç½²

- **å¾Œç«¯ï¼ˆAPI / Triggerï¼‰**
  - Cloudflare Workerï¼ˆJSï¼‰
  - ä¸»è¦è² è²¬ï¼šAPI è½‰ç™¼/é©—è­‰ã€è§¸ç™¼ GitHub Actionsã€è®€å¯«å¿«ç…§ï¼ˆä¾ä½ çš„éƒ¨ç½²æ–¹å¼ï¼‰

- **æ‰¹æ¬¡é‹ç®—ï¼ˆPortfolio Engineï¼‰**
  - GitHub Actions å®šæœŸæˆ–è¢«è§¸ç™¼åŸ·è¡Œ
  - `main.py` ç‚ºå…¥å£ï¼Œå‘¼å« `journal_engine/` è¨ˆç®—æŠ•è³‡çµ„åˆå¿«ç…§
  - å¸‚åƒ¹/åŒ¯ç‡ä¸»è¦ä¾†æºï¼šYahoo Financeï¼ˆæˆ–ä½ å°è£çš„ market clientï¼‰

- **è³‡æ–™å„²å­˜**
  - Cloudflare D1ï¼ˆSQLiteï¼‰å­˜æ”¾å„ä½¿ç”¨è€…å¿«ç…§ã€äº¤æ˜“è³‡æ–™ï¼ˆä¾ worker/api å¯¦ä½œï¼‰

> éƒ¨ç½²ç´°ç¯€èˆ‡ã€Œæ­£ç¢º Worker ä½ç½®ã€è«‹ä»¥æ–‡ä»¶ç‚ºæº–ï¼šDEPLOYMENT_FINAL.md

---

## ğŸ“ Repo çµæ§‹

ï¼ˆä»¥ repo root ç‚ºæº–ï¼‰

- `src/`ï¼šVue å‰ç«¯
  - `components/`ï¼šæ‰€æœ‰ Vue å…ƒä»¶
    - `StatsGrid.vue`ï¼šç¸¾æ•ˆå¡ç‰‡
    - `PerformanceChart.vue`ï¼šç¸¾æ•ˆæ›²ç·šåœ–
    - `HoldingsTable.vue`ï¼šæŒå€‰æ˜ç´°è¡¨
    - `RecordList.vue`ï¼šäº¤æ˜“ç´€éŒ„åˆ—è¡¨
    - `DividendManager.vue`ï¼šé…æ¯ç®¡ç†ä»‹é¢
    - `GroupManager.vue`ï¼šç¾¤çµ„ç®¡ç†ä»‹é¢
    - `TradeForm.vue`ï¼šäº¤æ˜“è¡¨å–®
    - `PieChart.vue`ï¼šåœ“é¤…åœ–ï¼ˆè³‡ç”¢é…ç½®ï¼‰
    - `LoginOverlay.vue`ï¼šç™»å…¥ç•«é¢
    - `skeletons/`ï¼šè¼‰å…¥éª¨æ¶å±
  - `stores/`ï¼šPinia ç‹€æ…‹ç®¡ç†
  - `composables/`ï¼šå¯é‡ç”¨é‚è¼¯ï¼ˆuseAutoRefresh / useDarkMode / usePWAï¼‰
  - `App.vue`ï¼šä¸»æ‡‰ç”¨ç¨‹å¼
- `public/`ï¼šPWA / CSP headers ç­‰éœæ…‹è³‡æº
- `worker.js`ï¼šCloudflare Worker ä¸»ç‰ˆæœ¬
- `cloudflare worker/`ï¼šæ­·å²/ç‰¹å®šç‰ˆæœ¬ Worker
- `main.py`ï¼šGitHub Actions æ‰¹æ¬¡è¨ˆç®—å…¥å£
- `journal_engine/`ï¼šæŠ•è³‡çµ„åˆè¨ˆç®—å¼•æ“ï¼ˆPythonï¼‰
- `tests/`ï¼šæ¸¬è©¦
- `.env.example`ï¼šç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
- `DEPLOYMENT_FINAL.md`ï¼šéƒ¨ç½²æŒ‡å—

---

## ğŸ§¾ è³‡æ–™èˆ‡äº¤æ˜“æ¨¡å‹

### äº¤æ˜“è³‡æ–™æ¬„ä½ï¼ˆæ¦‚å¿µï¼‰

- `Date`ï¼šäº¤æ˜“æ—¥æœŸï¼ˆä»¥æ—¥ç²’åº¦ç‚ºä¸»ï¼‰
- `Symbol`ï¼šæ¨™çš„ä»£ç¢¼ï¼ˆç¾è‚¡ç„¡å¾Œç¶´ã€å°è‚¡ `.TW/.TWO`ã€éŸ“è‚¡ `.KS/.KQ`ï¼‰
- `Type`ï¼š`BUY` / `SELL` / `DIV`
- `Qty`ï¼šæ•¸é‡
- `Price`ï¼šæˆäº¤åƒ¹ï¼ˆDIV æ™‚æ¬„ä½èªæ„å–æ±ºæ–¼ä½ çš„åŒ¯å…¥æ ¼å¼ï¼‰
- `Commission` / `Tax`ï¼šè²»ç”¨èˆ‡ç¨…ï¼ˆæœƒè¢«æ­£è¦åŒ–æˆæ­£å€¼å†ç´å…¥è¨ˆç®—ï¼‰
- `Tag`ï¼šç­–ç•¥æ¨™ç±¤ï¼ˆç”¨æ–¼ç¾¤çµ„ï¼‰

---

## ğŸ“¢ ç¸¾æ•ˆè¨ˆç®—èªªæ˜ï¼ˆä»¥ç¨‹å¼ç¢¼ç‚ºæº–ï¼‰

> é€™ä¸€ç¯€çš„ç›®æ¨™æ˜¯ã€ŒæŠŠç¨‹å¼çš„å¯¦éš›è¡Œç‚ºè¬›æ¸…æ¥šã€ï¼Œæ–¹ä¾¿ä½ æ—¥å¾Œå°å¸³èˆ‡æ“´å……ã€‚

### 1) æˆæœ¬èˆ‡å·²å¯¦ç¾æç›Šï¼šFIFO

- æ¯å€‹ `Symbol` ç¶­è­· FIFO lotsã€‚
- `BUY`ï¼šå¢åŠ æŒå€‰ qtyã€å¢åŠ æˆæœ¬ï¼ˆå« commission/taxï¼‰ã€‚
- `SELL`ï¼šç”¨ FIFO æ‰£æ¸› lotsï¼Œè¨ˆç®—è³£å‡ºæˆæœ¬ï¼›è³£å‡ºæ”¶å…¥æœƒæ‰£é™¤ commission/taxã€‚
- å·²å¯¦ç¾æç›Šï¼š`proceeds_twd - cost_sold_twd`ï¼ˆä¸¦ç´¯åŠ è‚¡æ¯ç­‰ç¾é‡‘æµï¼‰ã€‚

### 2) åŒ¯ç‡è™•ç†ï¼ˆæœ‰æ•ˆåŒ¯ç‡ multiplierï¼‰

- å°è‚¡ï¼ˆ`.TW/.TWO`ï¼‰ï¼šeffective FX = 1.0ã€‚
- éå°è‚¡ï¼šeffective FX = åŒ¯ç‡ï¼ˆæˆ–ä½  market client çš„å¹£åˆ¥è½‰æ›å€æ•¸ï¼‰ã€‚

### 3) ä¼°å€¼åƒ¹æ ¼èˆ‡ as-of æ—¥æœŸ

- è‹¥ market client æ”¯æ´ `get_price_asof()`ï¼š
  - æœƒå›å‚³ã€Œå¯¦éš›ä½¿ç”¨çš„ä¼°å€¼æ—¥æœŸ used_tsã€èˆ‡å°æ‡‰åƒ¹æ ¼ï¼ˆä¾‹å¦‚é‡åˆ°éäº¤æ˜“æ—¥æœƒå‘å‰å–æœ€è¿‘äº¤æ˜“æ—¥ï¼‰ã€‚
- åŒ¯ç‡é€šå¸¸æœƒç”¨ `fx_rates.asof(used_ts)`ï¼ˆè‹¥ used_ts = ä»Šæ—¥ä¸”ç¾è‚¡ç›¤ä¸­ï¼Œå¯èƒ½ä½¿ç”¨å³æ™‚åŒ¯ç‡ current_fxï¼‰ã€‚

### 4) TWRï¼ˆæ™‚é–“åŠ æ¬Šå ±é…¬ç‡ï¼‰ï¼šæ—¥åˆ‡åˆ† linked returns

æœ¬å°ˆæ¡ˆçš„ TWR æ˜¯ã€Œæ¯å¤©ä¸€å€‹å­æœŸé–“ã€çš„ linked returnï¼š

- å®šç¾©ï¼š
  - `last_market_value_twd`ï¼šå‰ä¸€æ—¥ä¼°å€¼ï¼ˆæœŸåˆï¼‰
  - `current_market_value_twd`ï¼šç•¶æ—¥ä¼°å€¼ï¼ˆæœŸæœ«ï¼‰
  - `daily_net_cashflow_twd`ï¼šç•¶æ—¥æ·¨ç¾é‡‘æµï¼ˆæ­£å€¼ä»£è¡¨æŠ•å…¥ã€è² å€¼ä»£è¡¨æµå‡º/å›æ”¶ï¼‰

- ç•¶ `last_market_value_twd > 0`ï¼š
  - `period_hpr_factor = (current_market_value_twd - daily_net_cashflow_twd) / last_market_value_twd`

- é¦–æ¬¡æŠ•å…¥ï¼ˆæœŸåˆ 0ã€æœŸæœ« >0 ä¸”æœ‰ç¾é‡‘æµï¼‰ï¼š
  - `period_hpr_factor = current_market_value_twd / daily_net_cashflow_twd`

- ç´¯ç©ï¼š
  - `cumulative_twr_factor *= period_hpr_factor`
  - `twr_percent = (cumulative_twr_factor - 1) * 100`

> è¨»ï¼šé€™æ˜¯ã€Œæ—¥åˆ‡åˆ† linked TWRã€ã€‚å®ƒä¸æ˜¯å‚³çµ±å–®ä¸€æœŸé–“çš„ Modified Dietzï¼ˆæ²’æœ‰å°æœŸé–“å…§ cashflow åšæ™‚é–“æ¬Šé‡ï¼‰ï¼Œä½†åœ¨ä½ æœ‰æ¯æ—¥ä¼°å€¼é»çš„æƒ…å¢ƒä¸‹é€šå¸¸æ›´è²¼è¿‘çœŸæ­£ TWRã€‚

### 5) è‚¡æ¯ï¼ˆDIV / pending / confirmedï¼‰

- `DIV` äº¤æ˜“æœƒè¢«è¦–ç‚ºã€Œå·²ç¢ºèªè‚¡æ¯ã€ï¼ˆé¿å…é‡è¤‡è¨ˆå…¥ï¼‰ã€‚
- ç³»çµ±ä¹Ÿæœƒå¾ market data æ¨å°ã€Œæ‡‰è¨ˆè‚¡æ¯ã€ä¸¦è¨˜éŒ„ç‚º dividend historyï¼š
  - è‹¥è©²æ—¥è©²æ¨™çš„æ²’æœ‰ `DIV` äº¤æ˜“ï¼Œæœƒè¦–ç‚º pendingï¼ˆä¸¦å¯èƒ½å…ˆè¡Œè¨ˆå…¥ realized / cashflowï¼Œä¾ç›®å‰ engine è¡Œç‚ºï¼‰ã€‚
  - è‹¥ä½ æ–°å¢ `DIV` äº¤æ˜“ï¼ˆconfirmedï¼‰ï¼Œå‰‡è©²ç­†æœƒè½‰ç‚º confirmedï¼Œé¿å… double-countã€‚
- è‚¡æ¯æ·¨é¡ç›®å‰å«é æ‰£ç¨…ç‡å‡è¨­ï¼ˆä¾‹å¦‚ 0.7 = 30% withholdingï¼‰ï¼›è‹¥ä½ è¦æ”¯æ´ä¸åŒå¸‚å ´ç¨…ç‡ï¼Œå»ºè­°æœªä¾†æŠŠç¨…ç‡è¦å‰‡åŒ–ï¼ˆper symbol / per market / per accountï¼‰ã€‚

### 6) XIRRï¼ˆMoney-weightedï¼‰

- XIRR ç”±ç¾é‡‘æµåºåˆ—è¨ˆç®—ï¼š
  - `BUY`ï¼šè² ç¾é‡‘æµ
  - `SELL` / `DIV`ï¼šæ­£ç¾é‡‘æµ
  - æœ€å¾ŒåŠ ä¸Šä¸€ç­†ã€Œç•¶å‰å¸‚å€¼ã€ä½œç‚ºæœŸæœ«æ­£ç¾é‡‘æµ

---

## ğŸš€ éƒ¨ç½²èˆ‡é–‹ç™¼

### å¿«é€Ÿé–‹å§‹ï¼ˆå‰ç«¯ï¼‰

```bash
npm install
npm run dev
```

### Python engineï¼ˆæœ¬æ©Ÿæ¸¬è©¦ï¼‰

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
python main.py
```

### éƒ¨ç½²ï¼ˆCloudflare + GitHub Actionsï¼‰

è«‹åƒè€ƒæ–‡ä»¶ï¼šDEPLOYMENT_FINAL.md

---

## ğŸ” å®‰å…¨æ€§

- Google OAuth 2.0 / JWTï¼ˆå¯¦éš›æµç¨‹ä¾ Worker å¯¦ä½œï¼‰
- CSPï¼ˆè¦‹ `public/_headers` èˆ‡ `index.html`ï¼‰
- CORS / API key / token é©—è­‰ï¼ˆä¾ Worker è¨­å®šï¼‰

---

## âš ï¸ é™åˆ¶èˆ‡å‡è¨­

- ç›®å‰å¼•æ“ä»¥ã€Œæ—¥ç²’åº¦ã€é‹ç®—ç‚ºä¸»ï¼ˆäº¤æ˜“æ™‚é–“ã€ç›¤ä¸­ cashflow æ™‚é»ä¸å»ºæ¨¡ï¼‰ã€‚
- ç›®å‰æ²’æœ‰é¡¯å¼ã€Œç¾é‡‘éƒ¨ä½ã€è³‡ç”¢ï¼ˆTWR/è³‡ç”¢æ›²ç·šä¸»è¦åæ˜ æŒå€‰ä¼°å€¼ + ç¾é‡‘æµè™•ç†é‚è¼¯ï¼‰ã€‚
- è‚¡æ¯ç¨…ç‡/å¸‚å ´è¦å‰‡ç›®å‰å hard-codedï¼ˆè‹¥è¦åš´æ ¼å°å¸³ï¼Œå»ºè­°æ“´å……è¦å‰‡å±¤ï¼‰ã€‚
- è‹¥ä½ è¦åšã€Œä»»æ„å€é–“ã€å–®ä¸€æ•¸å­—ç¸¾æ•ˆï¼Œå»ºè­°æ–°å¢ä¸€å€‹ç¨ç«‹çš„ Modified Dietz å ±è¡¨æŒ‡æ¨™ï¼Œè€Œä¸æ˜¯å–ä»£ç¾æœ‰æ—¥åˆ‡åˆ† TWRã€‚

---

<div align="center">

[â­ Star this project](https://github.com/chihung1024/sheet-trading-journal)
|
[ğŸ› Report bug](https://github.com/chihung1024/sheet-trading-journal/issues)
|
[ğŸ’¡ Request feature](https://github.com/chihung1024/sheet-trading-journal/issues)

</div>
